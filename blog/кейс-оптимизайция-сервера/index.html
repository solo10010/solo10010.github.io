<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://solo10010.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://solo10010.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var b=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("theme");b&&a===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),b&&a==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),a==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://solo10010.github.io/main.c984fc5e2d470530556f8263d4229fb8ff751848a667f3a06c92a4918dcd48114c0a3bae355ef415add2b59f36862aed0acd023f4e69492631b23b5e6308fda3.css integrity="sha512-yYT8Xi1HBTBVb4Jj1CKfuP91GEimZ/OgbJKkkY3NSBFMCjuuNV70Fa3StZ82hirtCs0CP05pSSYxsjteYwj9ow==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>–ö–ï–ô–° - –û–ø—Ç–∏–º–∏–∑–∞–π—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ üëã - HOM</title><meta name=description content="–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞. –ê–¥–º–∏–Ω–∏—Å–º—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã."><link rel=canonical href=https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="–ö–ï–ô–° - –û–ø—Ç–∏–º–∏–∑–∞–π—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ üëã"><meta property="og:description" content="–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞. –ê–¥–º–∏–Ω–∏—Å–º—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã."><meta property="og:url" content="https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/"><meta property="og:site_name" content="HOM"><meta property="article:published_time" content="2020-11-04T09:19:42+01:00"><meta property="article:modified_time" content="2020-11-04T09:19:42+01:00"><meta property="og:image" content="https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/say-hello-to-doks.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@getdoks"><meta name=twitter:creator content="@henkverlinde"><meta name=twitter:title content="–ö–ï–ô–° - –û–ø—Ç–∏–º–∏–∑–∞–π—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ üëã"><meta name=twitter:description content="–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞. –ê–¥–º–∏–Ω–∏—Å–º—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã."><meta name=twitter:image content="https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/say-hello-to-doks.png"><meta name=twitter:image:alt content="–ö–ï–ô–° - –û–ø—Ç–∏–º–∏–∑–∞–π—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ üëã"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://solo10010.github.io/#/schema/organization/1","name":"Doks","url":"https://solo10010.github.io/","sameAs":["https://twitter.com/solo10010","https://github.com/solo10010"],"logo":{"@type":"ImageObject","@id":"https://solo10010.github.io/#/schema/image/1","url":"https://solo10010.github.io/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://solo10010.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://solo10010.github.io/#/schema/website/1","url":"https://solo10010.github.io/","name":"HOM","description":"–°–∏—Å—Ç–µ–º–Ω—ã–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ò–ë —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç","publisher":{"@id":"https://solo10010.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/","url":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/","name":"–ö–ï–ô–° - –û–ø—Ç–∏–º–∏–∑–∞–π—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ üëã","description":"–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞. –ê–¥–º–∏–Ω–∏—Å–º—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã.","isPartOf":{"@id":"https://solo10010.github.io/#/schema/website/1"},"about":{"@id":"https://solo10010.github.io/#/schema/organization/1"},"datePublished":"2020-11-04T09:19:42CET","dateModified":"2020-11-04T09:19:42CET","breadcrumb":{"@id":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/"]}]},{"@type":"BreadcrumbList","@id":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://solo10010.github.io","url":"https://solo10010.github.io","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://solo10010.github.io/blog/","url":"https://solo10010.github.io/blog/","name":"Blog"}},{"@type":"ListItem","position":4,"item":{"@id":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://solo10010.github.io/#/schema/article/1","headline":"–ö–ï–ô–° - –û–ø—Ç–∏–º–∏–∑–∞–π—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ üëã","description":"–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞. –ê–¥–º–∏–Ω–∏—Å–º—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã.","isPartOf":{"@id":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/"},"mainEntityOfPage":{"@id":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/"},"datePublished":"2020-11-04T09:19:42CET","dateModified":"2020-11-04T09:19:42CET","author":{"@id":"https://solo10010.github.io/#/schema/person/2"},"publisher":{"@id":"https://solo10010.github.io/#/schema/organization/1"},"image":{"@id":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://solo10010.github.io/#/schema/person/2","name":"Henk Verlinde","sameAs":["https://twitter.com/solo10010","https://www.linkedin.com/in/solo10010/","https://github.com/solo10010"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://solo10010.github.io/blog/%D0%BA%D0%B5%D0%B9%D1%81-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D0%B9%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0/#/schema/image/2","url":"https://solo10010.github.io/doks.png","contentUrl":"https://solo10010.github.io/doks.png","caption":"–ö–ï–ô–° - –û–ø—Ç–∏–º–∏–∑–∞–π—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ üëã"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://solo10010.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://solo10010.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://solo10010.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://solo10010.github.io/site.webmanifest></head><body class="blog single"><div class="header-bar fixed-top"></div><header style=padding-top:5px;padding-bottom:0 class="navbar navbar-expand-md navbar-light doks-navbar fixed-top"><nav styele class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="hom_nav navbar p-0 me-auto" href=https://solo10010.github.io/ aria-label=HOM>HOM</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=https://solo10010.github.io/>HOM</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-3"><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a style="padding:.5rem 0;margin-left:.6rem" class="nav-link ps-0 py-1" href=https://solo10010.github.io/resume/>RESUME</a></li><li class=nav-item><a style="padding:.5rem 0;margin-left:.6rem" class="nav-link ps-0 py-1" href=https://solo10010.github.io/docs/prologue/introduction/>WIKI</a></li><li class=nav-item><a style="padding:.5rem 0;margin-left:.6rem" class="nav-link ps-0 py-1" href=https://solo10010.github.io/blog/>BLOG</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a style=border-bottom:none class="nav-link ps-0 py-1" href=https://github.com/solo10010><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li><li class=nav-item><a style=border-bottom:none class="nav-link ps-0 py-1" href=https://twitter.com/solo10010><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><small class="ms-2 d-md-none">Twitter</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></nav></header><div class="wrap container-xxl" role=document><div class=content><div class="row justify-content-center"><div class="col-md-12 col-lg-10 col-xl-8"><article><div class=blog-header><h1>–ö–ï–ô–° - –û–ø—Ç–∏–º–∏–∑–∞–π—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ üëã</h1><p><small>Posted November 4, 2020 by <a class="stretched-link position-relative" href=https://solo10010.github.io/contributors/%D0%B0%D0%BD%D1%82%D0%BE%D0%BD-%D1%81./>–ê–Ω—Ç–æ–Ω –°.</a>&nbsp;&dash;&nbsp;<strong>20&nbsp;min read</strong></small><p></div><p class=lead>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è - (MySQL/MariaDB) (Apache/Nginx) (Redis, OPcache) –ü—Ä–æ–±–ª–µ–º—ã —Å –æ—á–∏—Å—Ç–∫–æ–π –∫—ç—à–∞ –≤ DLE, –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ ISPmanager</p><p>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞</p><pre><code>–¢–∞—Ä–∏—Ñ: Cloud 2-8-1000
CPU: 2
MEM: 8
DISK: 10000
OS: Ubuntu 22.04

Panel: ISP
–ü–û: Redis OPcache
–°–∞–π—Ç: http://***gramm.pro/
</code></pre><p>–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:</p><pre><code>–•–æ—Ç–µ–ª–∏ –±—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É—Å–ª—É–≥–æ–π &quot;–ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –ø–ª–∞—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ&quot;. –ù—É–∂–Ω–∞ –≤–∞—à–∞ –ø–æ–º–æ—â—å –≤ –ø—Ä–æ–≤–µ—Ä–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (php, apache/nginx, mysql, Redis, OPcache) –¥–ª—è –µ–≥–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è.  
  
–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∞–¥–º–∏–Ω–∞–º–∏ –Ω–æ–≤–æ—Å—Ç–µ–π, –∏–º–µ–Ω–Ω–æ –≤ –º–æ–º–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ä–µ–∑–∫–∏–π –ø—Ä–∏—Ä–æ—Å—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU –∏ –û–ó–£ –≤–ø–ª–æ—Ç—å –¥–æ —Ç–æ–≥–æ, —á—Ç–æ —Å–∞–π—Ç –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–º –∏ –ø–æ–º–æ–≥–∞–µ—Ç —Ç–æ–ª—å–∫–æ &quot;–Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω–∞—è&quot; –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞.  
  
–û–±—Ä–∞—Ç–∏–ª–∏—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–≤–∏–∂–∫–∞ DLE –∏ –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç:  
&quot;–û–¥–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É —ç—Ç–æ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤, —Ö–æ—Ç—å –æ–¥–Ω–æ–≥–æ, —Ö–æ—Ç—å —Å—Ä–∞–∑—É 100 —ç—Ç–æ —Ç–æ–∂–µ –≤—Å–µ–≥–¥–∞ –æ–¥–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ, –ø–æ—Ç–æ–º—É –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –±—Ä–∞—É–∑–µ—Ä –ø–æ –æ—á–µ—Ä–µ–¥–∏. DLE –Ω–µ –¥–µ–ª–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ —Å–µ—Ä–≤–µ—Ä—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ —Å–µ—Ä–≤–µ—Ä—É. –ë–æ–ª–µ–µ —Ç–æ–≥–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–µ DLE, –∞ –±—Ä–∞—É–∑–µ—Ä —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–∞–ø—Ä—è–º—É—é. DLE –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –∫–æ–≥–¥–∞ —É–∂–µ –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏ –≤—Å–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ü–æ—ç—Ç–æ–º—É –æ—Ç DLE —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –Ω–∏–∫–∞–∫ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç, –∏ –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã DLE –º—ã –≤–∞–º –Ω–∏—á–µ–º –ø–æ–º–æ—á—å –Ω–µ –º–æ–∂–µ–º.  
  
–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –≤–∞–º –Ω—É–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ü–û. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏–±–æ —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –Ω–∞ —Å–µ–≤–µ—Ä–Ω–æ–º –ü–û, –ª–∏–±–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –¥–æ—á–µ—Ä–Ω–∏–µ –ø–æ—Ç–æ–∫–∏ –Ω–µ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞ —Å—Ä–∞–∑—É. –í–∞–º –Ω—É–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—Å—è –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞.  
–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç PHP –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ —Ç.–¥. –∑–∞–ø—É—Å–∫–∞—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã.  
–ü–æ–º–∏–º–æ –≤—Å–µ–≥–æ –ø—Ä–æ—á–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ—á–∏—â–∞–µ—Ç –∫–µ—à–∏ –∫–æ—Ç–æ—Ä—ã–µ DLE —Å–æ–∑–¥–∞–ª –¥–æ —ç—Ç–æ–≥–æ –¥–ª—è –æ–±–ª–µ–≥—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã, –æ—á–∏—â–∞—é—Ç—Å—è –æ–Ω–∏ —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–≤–∏–¥–µ–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –µ—Å–ª–∏ –º–Ω–æ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç —Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏ —ç—Ç–æ–º, —ç—Ç–æ –≤–ª–µ—á–µ—Ç –±–µ–∑—É—Å–ª–æ–≤–Ω–æ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏, –ø–æ–∫–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –æ–±–Ω–æ–≤—è—Ç—Å—è –∏ –æ–Ω–∞ –Ω–µ –Ω–∞—á–Ω–µ—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –∏–∑ –∫–µ—à–∞ –∞ –Ω–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.  
–ú—ã –Ω–µ –∑–∞–Ω–∏–º–∞–µ–º—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Å–µ—Ä–≤–µ—Ä–æ–≤. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ç—É—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –∞ —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ª–∞—é—Ç—Å—è –æ—á–µ–Ω—å —Ç–æ–Ω–∫–æ, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î, –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏, –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ –Ω—é–∞–Ω—Å–æ–≤ –∏ —Ç–æ–Ω–∫–æ—Å—Ç–µ–π. –í–∞–º –Ω—É–∂–µ–Ω –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–æ–≤ –∑–∞–Ω–∏–º–∞—é—Ç—Å—è –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ —Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –º—ã —ç—Ç–∏ –Ω–µ –∑–∞–Ω–∏–º–∞–µ–º—Å—è, —ç—Ç–æ –Ω–µ –Ω–∞—à–∞ —Å—Ñ–µ—Ä–∞ —Ä–∞–±–æ—Ç—ã.&quot;  
  
–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ISPManager.  
  
–°–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ &quot;–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä–∞–±–æ—Ç—ã&quot;.
</code></pre><p>–í–æ –≤—Ä–µ–º—è –∏—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤ —Å –∫–ª–∏–µ–Ω—Ç–æ–º –±—ã–ª–æ –≤—ã—è—Å–Ω–µ–Ω–æ —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ apache –¥–µ–π—Å—Ç–≤–∏—è –∫–æ—Ç–æ—Ä—ã–µ –∫ —ç—Ç–æ–º—É –ø—Ä–∏–≤–æ–¥—è—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–µ–π —Å –∞—É–¥–∏–æ.</p><p>–ü–æ –∑–∞–ø—Ä–æ—Å—É –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–ª —Å—Ç–∞—Ç—å—é –Ω–∞ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–µ http://***gramm.pro/ —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ —Å–∞–º–∏ –≤–æ–∏—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É, –∏ –ø–µ—Ä–µ–¥–∞–ª —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏.</p><p>–í–æ –≤—Ä–µ–º—è –≤–æ–∏—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —á—Ç–æ –ª—é–±–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º—É —É–≤–µ–ª–∏—á–µ–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ apache –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏ –∏ –∑–∞–≤–∏—Å–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞.</p><p>–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø–æ–∫–∞–∑–∞–ª —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ nginx –∏ Apache. —Ç–∞–∫ –∫–∞–∫ nginx –∏–¥–µ—Ç –ø–µ—Ä–≤—ã–º —Å–Ω–∞—á–∞–ª–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –µ–≥–æ.</p><p>–≤ nginx –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å–≤–æ –æ—à–∏–±–æ–∫ nginx —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å worker_connections</p><pre><code>2024/09/15 12:43:32 [alert] 259727#259727: 768 worker_connections are not enough
</code></pre><p>–£–≤–µ–ª–∏—á–∏–ª–∏ axRequestWorkers</p><pre><code>MaxRequestWorkers 150 -&gt; MaxRequestWorkers 550
</code></pre><p>–î–æ–±–∞–≤–∏–ª–∏ —Ç–∞–∫–∂–µ –±—É—Ñ–µ—Ä—ã</p><pre><code>proxy_buffering on; # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
proxy_buffer_size 4k;
proxy_buffers 32 4k; # –¥–æ 132K + —è–¥–µ—Ä–Ω—ã–µ –±—É—Ñ–µ—Ä–∞
proxy_max_temp_file_size 0;
</code></pre><p>–ö–ª–∏–µ–Ω—Ç —Ç–∞–∫–∂–µ —Å–æ–æ–±—â–∞–ª —Ç–∞–∫–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</p><pre><code>–ï—Å–ª–∏ –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å—ã, —Ç–æ –≤–∏–¥–∏–º, —á—Ç–æ –Ω–∞–ø–ª–æ–¥–∏–ª–æ—Å—å –±–æ–ª–µ–µ 150 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ apache2

–û—à–∏–±–∫–∞ 504 Gateway Time-Out. –ü—Ä–∏–ª–æ–∂–∏–ª –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞.
</code></pre><p>–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ Apache –±—ã–ª–∞ —Ç–∞–∂–µ –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º –ª–∏–º–∏—Ç–æ–≤, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å —Å–ª–µ–¥—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</p><pre><code>
–±—ã–ª–æ
vim /etc/apache2/mods-available/mpm_prefork.conf  
StartServers 5  
MinSpareServers 5  
MaxSpareServers 10  
MaxRequestWorkers 1024  
MaxConnectionsPerChild 0

—Å—Ç–∞–ª–æ

StartServers 10  
MinSpareServers 10  
MaxSpareServers 20  
ServerLimit 2000  
MaxRequestWorkers 1500  
MaxConnectionsPerChild 10000
</code></pre><p>–ï—Å–ª–∏ —Ä–µ–∑—é–º–∏—Ä–æ–≤–∞—Ç—å —Ç–æ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ç—å–∏ —á–µ—Ä–µ–∑ –≤–µ–± —Å–µ—Ä–≤–µ—Ä –∏–¥–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω–Ω–µ–∫—Ç–æ–≤. –í–µ–± —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ —É—Å–ø–µ–≤–∞—é—Ç –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å.</p><p>–î–∞–ª–µ–µ —Ç–∞–∫ –∫–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–≤—ã—Å–∏–ª–∏, –≤—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∂–∏—Ç—Å—è –Ω–∞ mysql</p><p>–ø–æ—Å–º–æ—Ç—Ä–µ–ª–∏ SHOW PROCCESSLIST;</p><p>–≤–∏–¥–∏–º –ø—Ä–æ—Ü–µ—Å—Å—ã –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —Ä–∞—Å—Ç—É—Ç</p><pre><code>| 6294 | admin                | localhost | vokal02_vokal | Query   |   46 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6295 | admin                | localhost | vokal02_vokal | Query   |   29 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6296 | admin                | localhost | vokal02_vokal | Query   |   26 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6297 | admin                | localhost | vokal02_vokal | Query   |   22 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6298 | admin                | localhost | vokal02_vokal | Query   |   32 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6299 | admin                | localhost | vokal02_vokal | Query   |   19 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6301 | admin                | localhost | vokal02_vokal | Query   |    4 | Opening tables               | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6303 | admin                | localhost | vokal02_vokal | Query   |   73 | executing                    | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6304 | admin                | localhost | vokal02_vokal | Sleep   |   73 |                              | NULL                                                                                                 |
| 6305 | admin                | localhost | vokal02_vokal | Query   |   73 | executing                    | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6307 | admin                | localhost | vokal02_vokal | Query   |   73 | executing                    | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
</code></pre><p>–°–¥–µ–ª–∞–ª–∏ –ª–æ–≥ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–≤–∞–ª–∏ —á–µ—Ä–µ–∑ percona-tools</p><pre><code># 150ms user time, 10ms system time, 28.94M rss, 34.90M vsz
# Current date: Fri Sep 20 05:31:11 2024
# Hostname: fonogramm3
# Files: /var/log/mysql/mysql-slow.log.1
# Overall: 811 total, 23 unique, 1.08 QPS, 88.99x concurrency ____________
# Time range: 2024-09-18T04:55:17 to 2024-09-18T05:07:46
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time         66652s      2s    168s     82s    159s     54s     84s
# Lock time         44917s       0    159s     55s    151s     56s     52s
# Rows sent          5.92k       0      60    7.48   36.69   11.90    2.90
# Rows examine      37.48M       0 228.27k  47.33k 222.42k  89.89k   11.95
# Query size       396.94k      16   1.15k  501.19  592.07  213.53  537.02

# Profile
# Rank Query ID                      Response time    Calls R/Call   V/M
# ==== ============================= ================ ===== ======== =====
#    1 0x8A2BFDCD9DEA61EDBD2CDFB3... 31009.2110 46.5%   282 109.9617 11.93 SELECT dle_post dle_post_extras
#    2 0x19650673119F178973630FD0... 18449.5609 27.7%   167 110.4764 21.18 SELECT dle_post dle_post_extras dle_post_extras_cats
#    3 0x445E7CAF1536030361A9EFB6...  7528.1039 11.3%    93  80.9474  8.96 SELECT dle_post dle_post_extras_cats dle_post_extras
#    4 0x2430813EE57DC6F686EE6FEA...  5733.1328  8.6%    48 119.4403 11.49 SELECT dle_post dle_post_extras
#    5 0x4990B5047475FA5BE176D77C...   934.2216  1.4%    86  10.8630  3.39 SELECT dle_post
#    9 0x651B55F97FA84879F295756D...   350.2628  0.5%    23  15.2288  6.29 SELECT dle_post dle_post_extras_cats
#   14 0xF07BF8B6438D6CE4DCF8F8EB...   149.8146  0.2%    65   2.3048  0.01 SELECT dle_post dle_post_extras_cats dle_post_extras
# MISC 0xMISC                         2497.3818  3.7%    47  53.1358   0.0 &lt;16 ITEMS&gt;

# Query 1: 11.75 QPS, 1.29kx concurrency, ID 0x8A2BFDCD9DEA61EDBD2CDFB3EB71656E at byte 461774
# Scores: V/M = 11.93
# Time range: 2024-09-18T05:07:22 to 2024-09-18T05:07:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         34     282
# Exec time     46  31009s      3s    161s    110s    151s     36s    107s
# Lock time     67  30176s      3s    159s    107s    151s     37s    107s
# Rows sent      4     281       0       1    1.00    0.99    0.06    0.99
# Rows examine   0     281       0       1    1.00    0.99    0.06    0.99
# Query size    38 150.88k     546     548  547.86  537.02       0  537.02
# String:
# Databases    vokal02_vokal
# Hosts        localhost
# Users        admin
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s  ##
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post`\G
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post_extras'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post_extras`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT p.id, p.autor, p.date, p.short_story, p.full_story, p.xfields, p.title, p.descr, p.keywords, p.category, p.alt_name, p.comm_num, p.allow_comm, p.allow_main, p.approve, p.fixed, p.allow_br, p.symbol, p.tags, p.metatitle, e.news_read, e.allow_rate, e.rating, e.vote_num, e.votes, e.view_edit, e.disable_index, e.related_ids, e.access, e.editdate, e.editor, e.reason, e.user_id, e.disable_search, e.need_pass, e.allow_rss, e.allow_rss_turbo, e.allow_rss_dzen FROM dle_post p LEFT JOIN dle_post_extras e ON (p.id=e.news_id) WHERE  p.id = '35688'\G
</code></pre><p>–ö–æ–Ω—Ñ–∏–≥ mysql</p><p>vim /etc/mysql/mysql.conf.d/mysqld.cnf</p><pre><code>#
# The MySQL database server configuration file.
#
# One can use all long options that the program supports.
# Run program with --help to get a list of available options and with
# --print-defaults to see which it would actually understand and use.
#
# For explanations see
# http://dev.mysql.com/doc/mysql/en/server-system-variables.html

# Here is entries for some specific programs
# The following values assume you have at least 32M ram

[mysqld]
collation-server = utf8_general_ci
character-set-server = utf8
local-infile=0
default-authentication-plugin=mysql_native_password
innodb_file_per_table = 1
#
# * Basic Settings
#
user            = mysql
# pid-file      = /var/run/mysqld/mysqld.pid
# socket        = /var/run/mysqld/mysqld.sock
# port          = 3306
# datadir       = /var/lib/mysql


# If MySQL is running as a replication slave, this should be
# changed. Ref https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_tmpdir
# tmpdir                = /tmp
#
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.
bind-address            = 127.0.0.1
mysqlx-bind-address     = 127.0.0.1
#
# * Fine Tuning
#
key_buffer_size         = 256M
max_allowed_packet      = 64M
# thread_stack          = 256K

# thread_cache_size       = -1

# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched
myisam-recover-options  = BACKUP

max_connections        = 500
wait_timeout           = 60
# table_open_cache       = 4000

#
# * Logging and Replication
#
# Both location gets rotated by the cronjob.
#
# Log all queries
# Be aware that this log type is a performance killer.
# general_log_file        = /var/log/mysql/query.log
# general_log             = 1
#
# Error log - should be very few entries.
#
log_error = /var/log/mysql/error.log

#
# Here you can see queries with especially long duration
# slow_query_log                = 1
# slow_query_log_file   = /var/log/mysql/mysql-slow.log
# long_query_time = 2
# log-queries-not-using-indexes
#
# The following can be used as easy to replay backup logs or for replication.
# note: if you are setting up a replication slave, see README.Debian about
#       other settings you may need to change.
# server-id             = 1
# log_bin                       = /var/log/mysql/mysql-bin.log
# binlog_expire_logs_seconds    = 2592000
max_binlog_size   = 200M
# binlog_do_db          = include_database_name
# binlog_ignore_db      = include_database_name

</code></pre><p>–ü–æ–º–µ–Ω—è–ª–∏ –Ω–∞</p><pre><code>[mysqld]
# –ö–æ–¥–∏—Ä–æ–≤–∫–∞
collation-server = utf8_general_ci
character-set-server = utf8
local-infile=0
default-authentication-plugin=mysql_native_password
innodb_file_per_table = 1

# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
user            = mysql
bind-address            = 127.0.0.1
mysqlx-bind-address     = 127.0.0.1

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ InnoDB
innodb_buffer_pool_size = 4G
innodb_read_io_threads = 8
innodb_write_io_threads = 8
innodb_thread_concurrency = 16
innodb_log_file_size = 1G
innodb_log_files_in_group = 2
innodb_lock_wait_timeout = 50
innodb_flush_method = O_DIRECT
innodb_buffer_pool_instances = 4

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–µ–π –∏ –±—É—Ñ–µ—Ä–æ–≤
key_buffer_size = 64M
table_open_cache = 2000
# query_cache_type = 0
# query_cache_size = 0
sort_buffer_size = 4M
thread_cache_size = 100

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
max_connections = 300
wait_timeout = 120
interactive_timeout = 120

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
log_error = /var/log/mysql/error.log
slow_query_log = 1
slow_query_log_file = /var/log/mysql/mysql-slow.log
long_query_time = 1
log_queries_not_using_indexes = 1

# –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –±–∏–Ω–∞—Ä–Ω—ã–µ –ª–æ–≥–∏
max_binlog_size   = 200M
#server-id             = 1
#log_bin                       = /var/log/mysql/mysql-bin.log
#binlog_expire_logs_seconds    = 2592000
#binlog_do_db          = include_database_name
#binlog_ignore_db      = include_database_name

</code></pre><h4 id=–ø–æ—á–µ–º—É-—ç—Ç–æ-–±—ã–ª–æ-—Å–¥–µ–ª–∞–Ω–æ><strong>–ü–æ—á–µ–º—É —ç—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:</strong></h4><ul><li><p><strong><code>innodb_buffer_pool_size = 4G</code></strong>: –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –ø—É–ª–∞ InnoDB, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–¥–µ–∫—Å–æ–≤. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –¥–æ 4 –ì–ë –ø–æ–∑–≤–æ–ª—è–µ—Ç MySQL —Ö—Ä–∞–Ω–∏—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è —Å –¥–∏—Å–∫–∞ –∏ —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤.</p></li><li><p><strong><code>innodb_read_io_threads</code> –∏ <code>innodb_write_io_threads</code> = 8</strong> : –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –ø–æ–∑–≤–æ–ª—è—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞.</p></li><li><p><strong><code>innodb_thread_concurrency = 16</code></strong>: –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å InnoDB. –ó–Ω–∞—á–µ–Ω–∏–µ 16 –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤.</p></li><li><p><strong><code>innodb_log_file_size = 1G</code> –∏ <code>innodb_log_files_in_group = 2</code></strong>: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ InnoDB —É–º–µ–Ω—å—à–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –∏—Ö –≤—Ä–∞—â–µ–Ω–∏—è (flush) –∏ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö –Ω–∞ –∑–∞–ø–∏—Å—å.</p></li><li><p><strong><code>innodb_lock_wait_timeout = 50</code></strong>: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º –¥–æ–ª—å—à–µ –∂–¥–∞—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, —á—Ç–æ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø—Ä–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.</p></li><li><p><strong><code>innodb_flush_method = O_DIRECT</code></strong>: –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥–≤–æ–π–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±—É—Ñ–µ—Ä–∞—Ö –û–° –∏ InnoDB, —É–ª—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏.</p></li><li><p><strong><code>innodb_buffer_pool_instances = 4</code></strong>: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –ø—É–ª–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ –∏ —É–ª—É—á—à–∞–µ—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.</p></li><li><p><strong><code>key_buffer_size = 64M</code></strong>: –ü–æ—Å–∫–æ–ª—å–∫—É –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ InnoDB –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è, —Ä–∞–∑–º–µ—Ä –∫–µ—à–∞ –∫–ª—é—á–µ–π –¥–ª—è MyISAM —Ç–∞–±–ª–∏—Ü ( <code>key_buffer_size</code>) –±—ã–ª —É–º–µ–Ω—å—à–µ–Ω. –≠—Ç–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –≤–∞–∂–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ InnoDB.</p></li><li><p><strong><code>table_open_cache = 2000</code></strong>: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç MySQL —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–æ–ª—å—à–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ –∫–µ—à–µ, —á—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ —Ç–∞–±–ª–∏—Ü, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–∞–±–ª–∏—Ü.</p></li><li><p><strong><code>sort_buffer_size = 4M</code></strong>: –≠—Ç–æ—Ç –±—É—Ñ–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –Ω–æ —Å–ª–µ–¥—É–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ —ç—Ç–æ—Ç –±—É—Ñ–µ—Ä –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–º—É –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.</p></li><li><p><strong><code>thread_cache_size = 100</code></strong>: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç MySQL –±—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞ —Å—á–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.</p></li></ul><p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏</p><h4 id=–ø–æ—á–µ–º—É-—ç—Ç–æ-–±—ã–ª–æ-—Å–¥–µ–ª–∞–Ω–æ-1><strong>–ü–æ—á–µ–º—É —ç—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:</strong></h4><ul><li><p><strong><code>max_connections = 300</code></strong>: –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ —Å–µ—Ä–≤–µ—Ä—É MySQL. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –Ω–∞ 300 –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤. –û–¥–Ω–∞–∫–æ –≤–∞–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–∞–∫–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.</p></li><li><p><strong><code>wait_timeout</code> –∏ <code>interactive_timeout = 120</code></strong>: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º –¥–æ–ª—å—à–µ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏, —á—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –û–¥–Ω–∞–∫–æ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤, –ø–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–º—è—Ç–∏.</p></li></ul><h4 id=–ø–æ—á–µ–º—É-—ç—Ç–æ-–±—ã–ª–æ-—Å–¥–µ–ª–∞–Ω–æ-2><strong>–ü–æ—á–µ–º—É —ç—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:</strong></h4><ul><li><p><strong><code>slow_query_log = 1</code></strong>: –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–Ω–∏–º–∞—é—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —á–µ–º –∑–∞–¥–∞–Ω–Ω—ã–π –ø–æ—Ä–æ–≥ ( <code>long_query_time</code>).</p></li><li><p><strong><code>long_query_time = 1</code></strong>: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ—Å—è –¥–æ–ª—å—à–µ –æ–¥–Ω–æ–π —Å–µ–∫—É–Ω–¥—ã, –±—É–¥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –≤ –º–µ–¥–ª–µ–Ω–Ω—ã–π –ª–æ–≥. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.</p></li><li><p><strong><code>log_queries_not_using_indexes = 1</code></strong>: –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–Ω–¥–µ–∫—Å—ã. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å–∫–æ—Ä–µ–Ω—ã –∑–∞ —Å—á–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤.</p></li></ul><h4 id=–ø–æ—á–µ–º—É-—ç—Ç–æ-–±—ã–ª–æ-—Å–¥–µ–ª–∞–Ω–æ-3><strong>–ü–æ—á–µ–º—É —ç—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:</strong></h4><ul><li><p><strong><code>max_binlog_size = 200M</code></strong>: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö –ª–æ–≥–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –∏—Ö —á—Ä–µ–∑–º–µ—Ä–Ω—ã–π —Ä–æ—Å—Ç. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏—Å–∫–æ–≤—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.</p></li><li><p><strong>–û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã</strong> : –ü–æ—Å–∫–æ–ª—å–∫—É –≤—ã, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏–ª–∏ –±–∏–Ω–∞—Ä–Ω—ã–µ –ª–æ–≥–∏ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—ã–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã. –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–µ –ª–æ–≥–∏, –∏—Ö –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å.</p></li></ul><h3 id=–ø–æ—á–µ–º—É-–∏–∑–º–µ–Ω–µ–Ω–∏—è-—É–ª—É—á—à–∏–ª–∏-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å><strong>–ü–æ—á–µ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–ª—É—á—à–∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong></h3><ol><li><p><strong>–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</strong> : –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ <code>query_cache_type</code> –∏ <code>query_cache_size</code> –ø–æ–∑–≤–æ–ª–∏–ª–æ MySQL —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.</p></li><li><p><strong>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏</strong> : –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –º–µ–∂–¥—É –±—É—Ñ–µ—Ä–Ω—ã–º–∏ –ø—É–ª–∞–º–∏ –∏ –∫–µ—à–∞–º–∏ –ø–æ–∑–≤–æ–ª–∏–ª–æ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—É—é –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å, —á—Ç–æ —Å–Ω–∏–∑–∏–ª–æ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–∏—Å—Ç–µ–º—É –∏ —É–º–µ–Ω—å—à–∏–ª–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.</p></li><li><p><strong>–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞</strong> : –ù–∞—Å—Ç—Ä–æ–π–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ—Ç–æ–∫–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞–º–∏, –ø–æ–∑–≤–æ–ª–∏–ª–∏ —Å–µ—Ä–≤–µ—Ä—É –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–ª–æ –æ–±—â—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.</p></li><li><p><strong>–£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</strong> : –í–∫–ª—é—á–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –ª–æ–≥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–∑–≤–æ–ª–∏–ª–æ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —á—Ç–æ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Å–Ω–∏–∂–∞–µ—Ç –æ–±—â—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä.</p></li><li><p><strong>–°–Ω–∏–∂–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü</strong> : –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ InnoDB, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –ø—É–ª–∞ –∏ –º–µ—Ç–æ–¥—ã —Å–±—Ä–æ—Å–∞, –ø–æ–∑–≤–æ–ª–∏–ª–∞ —É–º–µ–Ω—å—à–∏—Ç—å –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.</p></li></ol><h3 id=–∑–∞–∫–ª—é—á–µ–Ω–∏–µ><strong>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</strong></h3><p>–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª <code>my.cnf</code> –±—ã–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞, —É–ª—É—á—à–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –≤–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É MySQL —Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, —Å–Ω–∏–∑–∏–≤ –Ω–∞–≥—Ä—É–∑–∫—É –∏ —É—Å—Ç—Ä–∞–Ω–∏–≤ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ —Ç–∞–±–ª–∏—Ü.</p><p>–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–µ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ –∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫</p><pre><code> SHOW PROCESSLIST;
+------+-----------------+-----------+--------+---------+------+------------------------+------------------+
| Id   | User            | Host      | db     | Command | Time | State                  | Info             |
+------+-----------------+-----------+--------+---------+------+------------------------+------------------+
|    5 | event_scheduler | localhost | NULL   | Daemon  |  300 | Waiting on empty queue | NULL             |
|   79 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
|   80 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
|   81 | ispmgr          | localhost | ispmgr | Sleep   |  225 |                        | NULL             |
|   82 | ispmgr          | localhost | ispmgr | Sleep   |   34 |                        | NULL             |
|  390 | ispmgr          | localhost | ispmgr | Sleep   |  225 |                        | NULL             |
|  391 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
| 2281 | root            | localhost | NULL   | Query   |    0 | init                   | SHOW PROCESSLIST |
+------+-----------------+-----------+--------+---------+------+------------------------+------------------+
8 rows in set, 1 warning (0.00 sec)

</code></pre><p>–ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –ø–µ—Ä—Å–æ–Ω—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π</p><pre><code># 90ms user time, 30ms system time, 28.98M rss, 34.89M vsz
# Current date: Fri Sep 20 06:14:21 2024
# Hostname: fonogramm3
# Files: /var/log/mysql/mysql-slow.log
# Overall: 278 total, 22 unique, 0.70 QPS, 0.01x concurrency _____________
# Time range: 2024-09-20T06:03:51 to 2024-09-20T06:10:28
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time             4s    58us      1s    13ms     5ms   105ms   626us
# Lock time          740us       0    17us     2us     4us     1us     1us
# Rows sent          5.57k       0      60   20.50   59.77   23.99    6.98
# Rows examine     754.74k       0 228.27k   2.71k   1.26k  22.96k   62.76
# Query size        63.46k      32     603  233.73  563.87  127.40  212.52

# Profile
# Rank Query ID                        Response time Calls R/Call V/M   It
# ==== =============================== ============= ===== ====== ===== ==
#    1 0x19650673119F178973630FD07E...  3.1090 87.3%     3 1.0363  0.01 SELECT dle_post dle_post_extras dle_post_extras_cats
#    2 0x651B55F97FA84879F295756D0D...  0.2044  5.7%   138 0.0015  0.00 SELECT dle_post dle_post_extras_cats
#    3 0x1F18CE45F7AB14058C0B37FF1E...  0.1677  4.7%     5 0.0335  0.13 SELECT dle_post dle_post_extras_cats dle_post_extras
# MISC 0xMISC                           0.0783  2.2%   132 0.0006   0.0 &lt;19 ITEMS&gt;

# Query 1: 0.06 QPS, 0.06x concurrency, ID 0x19650673119F178973630FD07ECA56E4 at byte 57443
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2024-09-20T06:07:16 to 2024-09-20T06:08:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1       3
# Exec time     87      3s   977ms      1s      1s      1s    89ms   945ms
# Lock time      0     5us     1us     2us     1us     1us       0     1us
# Rows sent      0      30      10      10      10      10       0      10
# Rows examine  90 684.82k 228.27k 228.27k 228.27k 228.27k       0 228.27k
# Query size     2   1.73k     590     590     590     590       0     590
# String:
# Databases    vokal02_vokal
# Hosts        localhost
# Users        admin
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s  ################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post`\G
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post_extras'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post_extras`\G
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post_extras_cats'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post_extras_cats`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.title, p.descr, p.keywords, p.category, p.alt_name, p.comm_num, p.allow_comm, p.allow_main, p.approve, p.fixed, p.symbol, p.tags, e.news_read, e.allow_rate, e.rating, e.vote_num, e.votes, e.view_edit, e.disable_index, e.editdate, e.editor, e.reason FROM dle_post p LEFT JOIN dle_post_extras e ON (p.id=e.news_id)  WHERE p.id NOT IN ( SELECT DISTINCT(dle_post_extras_cats.news_id) FROM dle_post_extras_cats WHERE cat_id IN ('3548','3541','7') ) AND approve=1 ORDER BY news_read ASC LIMIT 0,10\G

# Query 2: 0.35 QPS, 0.00x concurrency, ID 0x651B55F97FA84879F295756D0D5656F9 at byte 65406
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2024-09-20T06:03:51 to 2024-09-20T06:10:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         49     138
# Exec time      5   204ms   281us    14ms     1ms     6ms     2ms   925us
# Lock time     60   446us     1us    10us     3us     4us     1us     2us
# Rows sent     91   5.07k       1      60   37.60   59.77   22.64   42.48
# Rows examine   7  56.99k       3   3.83k  422.91   2.62k  748.83  158.58
# Query size    46  29.25k     215     225  217.07  212.52    1.55  212.52
# String:
# Databases    vokal02_vokal
# Hosts        localhost
# Users        admin
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #######################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post`\G
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post_extras_cats'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post_extras_cats`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT p.id FROM dle_post p INNER JOIN (SELECT DISTINCT(dle_post_extras_cats.news_id) FROM dle_post_extras_cats WHERE cat_id IN ('309')) c ON (p.id=c.news_id) WHERE approve=1 ORDER BY fixed desc, title ASC LIMIT 360,60\G

</code></pre><p>–∫–∞–∫ –≤–∏–¥–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –±–æ–ª–µ–µ 10 —Å–µ–∫—É–Ω–¥ —Å—Ç–∞–ª–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–µ, –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ 100us 1ms, —Ö–æ—Ç—è –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –µ—â–µ –æ—Å—Ç–∞—é—Ç—Å—è.</p><h1 id=–æ—Ç—á–µ—Ç-–æ–±-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏-—Å–µ—Ä–≤–µ—Ä–∞>–û—Ç—á–µ—Ç –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞</h1><h2 id=—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</h2><ol><li><a href=#%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0>–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞</a></li><li><a href=#%D0%BF%D0%B5%D1%80%D0%B2%D0%BE%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5-%D0%BE%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B1%D0%BB%D0%B5%D0%BC%D1%8B>–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</a></li><li><a href=#%D0%B8%D1%81%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D1%80%D0%B5%D0%B7%D1%83%D0%BB%D1%8C%D1%82%D0%B0%D1%82%D1%8B>–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</a></li><li><a href=#%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8>–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</a><ul><li><a href=#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-nginx>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx</a></li><li><a href=#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-apache>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apache</a></li><li><a href=#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-mysql>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL</a></li></ul></li><li><a href=#%D1%80%D0%B5%D0%B7%D1%83%D0%BB%D1%8C%D1%82%D0%B0%D1%82%D1%8B-%D0%B8-%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑</a></li><li><a href=#%D0%B7%D0%B0%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</a></li></ol><h2 id=—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è-—Å–µ—Ä–≤–µ—Ä–∞>–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞</h2><ul><li><strong>–¢–∞—Ä–∏—Ñ</strong>: Cloud 2-8-1000</li><li><strong>CPU</strong>: 2 —è–¥—Ä–∞</li><li><strong>–û–ó–£</strong>: 8 –ì–ë</li><li><strong>–î–∏—Å–∫</strong>: 10000 –ì–ë</li><li><strong>–û–°</strong>: Ubuntu 22.04</li><li><strong>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</strong>: ISP Manager</li><li><strong>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ü–û</strong>: Redis, OPcache</li><li><strong>–°–∞–π—Ç</strong>: http://***gramm.pro/</li></ul><h2 id=–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã>–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</h2><p>–°–µ—Ä–≤–µ—Ä –∏—Å–ø—ã—Ç—ã–≤–∞–ª —Å–µ—Ä—å–µ–∑–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –¥–æ–±–∞–≤–ª—è–ª–∏ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ –Ω–æ–≤–æ—Å—Ç–∏. –°–∏–º–ø—Ç–æ–º—ã –≤–∫–ª—é—á–∞–ª–∏:</p><ol><li>–†–µ–∑–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</li><li>–í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ –û–ó–£</li><li>–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞</li><li>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏</li></ol><p>–ü—Ä–æ–±–ª–µ–º—ã –±—ã–ª–∏ –Ω–∞–∏–±–æ–ª–µ–µ –≤—ã—Ä–∞–∂–µ–Ω—ã –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π, –æ—Å–æ–±–µ–Ω–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –∞—É–¥–∏–æ –∫–æ–Ω—Ç–µ–Ω—Ç.</p><h2 id=–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ-–∏-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã>–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2><h3 id=–ø—Ä–æ—Ü–µ—Å—Å—ã-apache>–ü—Ä–æ—Ü–µ—Å—Å—ã Apache</h3><ul><li>–ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Apache (–±–æ–ª–µ–µ 150) —Å–æ–∑–¥–∞–≤–∞–ª–æ—Å—å –≤–æ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π.</li><li>–≠—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–∑—ã–≤–∞–ª–∏ –∏—Å—Ç–æ—â–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤.</li></ul><h3 id=–∞–Ω–∞–ª–∏–∑-mysql>–ê–Ω–∞–ª–∏–∑ MySQL</h3><ul><li><code>SHOW PROCESSLIST</code> –ø–æ–∫–∞–∑–∞–ª –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–µ—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ MySQL.</li><li>–ú–Ω–æ–≥–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ &ldquo;Waiting for table level lock&rdquo;.</li><li>–û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:<pre><code class=language-sql>SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t ...
</code></pre></li></ul><h3 id=–∞–Ω–∞–ª–∏–∑-–º–µ–¥–ª–µ–Ω–Ω—ã—Ö-–∑–∞–ø—Ä–æ—Å–æ–≤>–ê–Ω–∞–ª–∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</h3><p>–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Percona Toolkit –ø–æ–∫–∞–∑–∞–ª:</p><ul><li>811 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤—Å–µ–≥–æ, 23 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö</li><li>1.08 QPS (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)</li><li>88.99x –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å</li><li>–ó–∞–ø—Ä–æ—Å —Å –Ω–∞–∏–≤—ã—Å—à–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º (46.5% –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞):<pre><code class=language-sql>SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.title, p.descr, p.keywords, p.category, p.alt_name, p.comm_num, p.allow_comm, p.allow_main, p.approve, p.fixed, p.allow_br, p.symbol, p.tags, p.metatitle, e.news_read, e.allow_rate, e.rating, e.vote_num, e.votes, e.view_edit, e.disable_index, e.related_ids, e.access, e.editdate, e.editor, e.reason, e.user_id, e.disable_search, e.need_pass, e.allow_rss, e.allow_rss_turbo, e.allow_rss_dzen FROM dle_post p LEFT JOIN dle_post_extras e ON (p.id=e.news_id) WHERE p.id = '35688'
</code></pre></li></ul><h2 id=–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏>–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</h2><h3 id=–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-nginx>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx</h3><ul><li>–£–≤–µ–ª–∏—á–µ–Ω–æ <code>worker_connections</code> –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –æ—à–∏–±–∫–∏ &ldquo;768 worker_connections are not enough&rdquo;.</li><li>–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏:<pre><code class=language-nginx>proxy_buffering on;
proxy_buffer_size 4k;
proxy_buffers 32 4k;
proxy_max_temp_file_size 0;
</code></pre></li></ul><h3 id=–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-apache>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apache</h3><p>–ò–∑–º–µ–Ω–µ–Ω —Ñ–∞–π–ª <code>/etc/apache2/mods-available/mpm_prefork.conf</code>:</p><pre><code class=language-apache>StartServers 10
MinSpareServers 10
MaxSpareServers 20
ServerLimit 2000
MaxRequestWorkers 1500
MaxConnectionsPerChild 10000
</code></pre><h3 id=–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-mysql>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL</h3><p>–û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>:</p><pre><code class=language-ini>[mysqld]
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ InnoDB
innodb_buffer_pool_size = 4G
innodb_read_io_threads = 8
innodb_write_io_threads = 8
innodb_thread_concurrency = 16
innodb_log_file_size = 1G
innodb_log_files_in_group = 2
innodb_lock_wait_timeout = 50
innodb_flush_method = O_DIRECT
innodb_buffer_pool_instances = 4

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–∞ –∏ –±—É—Ñ–µ—Ä–æ–≤
key_buffer_size = 64M
table_open_cache = 2000
sort_buffer_size = 4M
thread_cache_size = 100

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
max_connections = 300
wait_timeout = 120
interactive_timeout = 120

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
slow_query_log = 1
slow_query_log_file = /var/log/mysql/mysql-slow.log
long_query_time = 1
log_queries_not_using_indexes = 1

# –ë–∏–Ω–∞—Ä–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
max_binlog_size = 200M
</code></pre><h2 id=—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-–∏-–∞–Ω–∞–ª–∏–∑>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑</h2><p>–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:</p><ol><li><p>–ü—Ä–æ–±–ª–µ–º–∞ —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞.</p></li><li><p>–í—ã–≤–æ–¥ <code>SHOW PROCESSLIST</code> –ø–æ–∫–∞–∑–∞–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:</p><pre><code>+------+-----------------+-----------+--------+---------+------+------------------------+------------------+
| Id   | User            | Host      | db     | Command | Time | State                  | Info             |
+------+-----------------+-----------+--------+---------+------+------------------------+------------------+
|    5 | event_scheduler | localhost | NULL   | Daemon  |  300 | Waiting on empty queue | NULL             |
|   79 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
|   80 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
|   81 | ispmgr          | localhost | ispmgr | Sleep   |  225 |                        | NULL             |
|   82 | ispmgr          | localhost | ispmgr | Sleep   |   34 |                        | NULL             |
|  390 | ispmgr          | localhost | ispmgr | Sleep   |  225 |                        | NULL             |
|  391 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
| 2281 | root            | localhost | NULL   | Query   |    0 | init                   | SHOW PROCESSLIST |
+------+-----------------+-----------+--------+---------+------+------------------------+------------------+
</code></pre></li><li><p>–ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ Percona Toolkit –ø–æ–∫–∞–∑–∞–ª:</p><ul><li>–£–º–µ–Ω—å—à–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (278 –ø—Ä–æ—Ç–∏–≤ 811 —Ä–∞–Ω–µ–µ)</li><li>–°–Ω–∏–∂–µ–Ω–∏–µ QPS (0.70 –ø—Ä–æ—Ç–∏–≤ 1.08 —Ä–∞–Ω–µ–µ)</li><li>–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (0.01x –ø—Ä–æ—Ç–∏–≤ 88.99x —Ä–∞–Ω–µ–µ)</li><li>–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 100–º–∫—Å –¥–æ 1–º—Å</li></ul></li></ol><h2 id=–∑–∞–∫–ª—é—á–µ–Ω–∏–µ-1>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</h2><p>–í–Ω–µ–¥—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞:</p><ol><li><strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏</strong>: –£–ª—É—á—à–µ–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ CPU –º–µ–∂–¥—É Nginx, Apache –∏ MySQL.</li><li><strong>–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</strong>: –ü–æ–≤—ã—à–µ–Ω–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.</li><li><strong>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</strong>: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MySQL —É–ª—É—á—à–∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —É–º–µ–Ω—å—à–∏–ª–∏ –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.</li><li><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</strong>: –£–ª—É—á—à–µ–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.</li></ol><p>–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.</p></article></div></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Copyright (c) 2021-2024 Solo10010</li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=https://solo10010.github.io/js/solojs.js defer></script>
<script src=https://solo10010.github.io/js/bootstrap.min.73ca27033146a505b6a0f66b79d99f613a18e778bc9606fd223476d0ebf0fc10508b0d4f5c448b0a946fa1d71fbeffaae9732adc0c2890e61c449217fd6ee1c0.js integrity="sha512-c8onAzFGpQW2oPZredmfYToY53i8lgb9IjR20Ovw/BBQiw1PXESLCpRvodcfvv+q6XMq3AwokOYcRJIX/W7hwA==" crossorigin=anonymous defer></script>
<script src=https://solo10010.github.io/js/highlight.min.e13cfba4c5524e30386cb9ea71f0f191f39d15b25b222f4b67549689f7c076158f42a2282446044f5cdacc76a6d003efbfa252a84aea0116703803b6339ae35f.js integrity="sha512-4Tz7pMVSTjA4bLnqcfDxkfOdFbJbIi9LZ1SWiffAdhWPQqIoJEYET1zazHam0APvv6JSqErqARZwOAO2M5rjXw==" crossorigin=anonymous defer></script>
<script src=https://solo10010.github.io/main.min.bfb6b781dd5fd7177a7a9b3ce0bd84f12db95f6aa4e3fc7b339cd57879c38390d1e8d75cf314836a71201ba2fd6a2e26084a956704964c0bb884c26e9eff5ee1.js integrity="sha512-v7a3gd1f1xd6eps84L2E8S25X2qk4/x7M5zVeHnDg5DR6Ndc8xSDanEgG6L9ai4mCEqVZwSWTAu4hMJunv9e4Q==" crossorigin=anonymous defer></script></body><script src=https://cdn.jsdelivr.net/npm/apexcharts></script>
<script>window.replainSettings={id:'958f1121-9a39-438a-91fd-8cab48dfef53'},function(c){var a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,a.src=c,b=document.getElementsByTagName('script')[0],b.parentNode.insertBefore(a,b)}('https://widget.replain.cc/dist/client.js')</script></html>