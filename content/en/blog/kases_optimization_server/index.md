---
title: "–ö–ï–ô–° - –û–ø—Ç–∏–º–∏–∑–∞–π—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ üëã"
description: "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞. –ê–¥–º–∏–Ω–∏—Å–º—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã."
lead: "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è - (MySQL/MariaDB) (Apache/Nginx) (Redis, OPcache) –ü—Ä–æ–±–ª–µ–º—ã —Å –æ—á–∏—Å—Ç–∫–æ–π –∫—ç—à–∞ –≤ DLE, –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ ISPmanager"
date: 2020-11-04T09:19:42+01:00
lastmod: 2020-11-04T09:19:42+01:00
draft: false
weight: 50
images: ["say-hello-to-doks.png"]
contributors: ["–ê–Ω—Ç–æ–Ω –°."]
---

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞

```
–¢–∞—Ä–∏—Ñ: Cloud 2-8-1000
CPU: 2
MEM: 8
DISK: 10000
OS: Ubuntu 22.04

Panel: ISP
–ü–û: Redis OPcache
–°–∞–π—Ç: http://***gramm.pro/
```

–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

```
–•–æ—Ç–µ–ª–∏ –±—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É—Å–ª—É–≥–æ–π "–ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –ø–ª–∞—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ". –ù—É–∂–Ω–∞ –≤–∞—à–∞ –ø–æ–º–æ—â—å –≤ –ø—Ä–æ–≤–µ—Ä–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (php, apache/nginx, mysql, Redis, OPcache) –¥–ª—è –µ–≥–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è.  
  
–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∞–¥–º–∏–Ω–∞–º–∏ –Ω–æ–≤–æ—Å—Ç–µ–π, –∏–º–µ–Ω–Ω–æ –≤ –º–æ–º–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ä–µ–∑–∫–∏–π –ø—Ä–∏—Ä–æ—Å—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU –∏ –û–ó–£ –≤–ø–ª–æ—Ç—å –¥–æ —Ç–æ–≥–æ, —á—Ç–æ —Å–∞–π—Ç –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–º –∏ –ø–æ–º–æ–≥–∞–µ—Ç —Ç–æ–ª—å–∫–æ "–Ω–∞—Å–∏–ª—å—Å—Ç–≤–µ–Ω–Ω–∞—è" –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞.  
  
–û–±—Ä–∞—Ç–∏–ª–∏—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–≤–∏–∂–∫–∞ DLE –∏ –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç:  
"–û–¥–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É —ç—Ç–æ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤, —Ö–æ—Ç—å –æ–¥–Ω–æ–≥–æ, —Ö–æ—Ç—å —Å—Ä–∞–∑—É 100 —ç—Ç–æ —Ç–æ–∂–µ –≤—Å–µ–≥–¥–∞ –æ–¥–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ, –ø–æ—Ç–æ–º—É –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –±—Ä–∞—É–∑–µ—Ä –ø–æ –æ—á–µ—Ä–µ–¥–∏. DLE –Ω–µ –¥–µ–ª–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ —Å–µ—Ä–≤–µ—Ä—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ —Å–µ—Ä–≤–µ—Ä—É. –ë–æ–ª–µ–µ —Ç–æ–≥–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–µ DLE, –∞ –±—Ä–∞—É–∑–µ—Ä —Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–∞–ø—Ä—è–º—É—é. DLE –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –∫–æ–≥–¥–∞ —É–∂–µ –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏ –≤—Å–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ü–æ—ç—Ç–æ–º—É –æ—Ç DLE —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –Ω–∏–∫–∞–∫ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç, –∏ –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã DLE –º—ã –≤–∞–º –Ω–∏—á–µ–º –ø–æ–º–æ—á—å –Ω–µ –º–æ–∂–µ–º.  
  
–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –≤–∞–º –Ω—É–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –ü–û. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏–±–æ —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ –Ω–∞ —Å–µ–≤–µ—Ä–Ω–æ–º –ü–û, –ª–∏–±–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –¥–æ—á–µ—Ä–Ω–∏–µ –ø–æ—Ç–æ–∫–∏ –Ω–µ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞ —Å—Ä–∞–∑—É. –í–∞–º –Ω—É–∂–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—Å—è –≤ —Å–ª—É–∂–±—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞.  
–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç PHP –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ —Ç.–¥. –∑–∞–ø—É—Å–∫–∞—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã.  
–ü–æ–º–∏–º–æ –≤—Å–µ–≥–æ –ø—Ä–æ—á–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ—á–∏—â–∞–µ—Ç –∫–µ—à–∏ –∫–æ—Ç–æ—Ä—ã–µ DLE —Å–æ–∑–¥–∞–ª –¥–æ —ç—Ç–æ–≥–æ –¥–ª—è –æ–±–ª–µ–≥—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã, –æ—á–∏—â–∞—é—Ç—Å—è –æ–Ω–∏ —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–≤–∏–¥–µ–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –µ—Å–ª–∏ –º–Ω–æ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç —Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏ —ç—Ç–æ–º, —ç—Ç–æ –≤–ª–µ—á–µ—Ç –±–µ–∑—É—Å–ª–æ–≤–Ω–æ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏, –ø–æ–∫–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –æ–±–Ω–æ–≤—è—Ç—Å—è –∏ –æ–Ω–∞ –Ω–µ –Ω–∞—á–Ω–µ—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –∏–∑ –∫–µ—à–∞ –∞ –Ω–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.  
–ú—ã –Ω–µ –∑–∞–Ω–∏–º–∞–µ–º—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Å–µ—Ä–≤–µ—Ä–æ–≤. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ç—É—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –∞ —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–µ–ª–∞—é—Ç—Å—è –æ—á–µ–Ω—å —Ç–æ–Ω–∫–æ, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î, –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏, –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ –Ω—é–∞–Ω—Å–æ–≤ –∏ —Ç–æ–Ω–∫–æ—Å—Ç–µ–π. –í–∞–º –Ω—É–∂–µ–Ω –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Ä–æ–≤ –∑–∞–Ω–∏–º–∞—é—Ç—Å—è –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ —Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –º—ã —ç—Ç–∏ –Ω–µ –∑–∞–Ω–∏–º–∞–µ–º—Å—è, —ç—Ç–æ –Ω–µ –Ω–∞—à–∞ —Å—Ñ–µ—Ä–∞ —Ä–∞–±–æ—Ç—ã."  
  
–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ISPManager.  
  
–°–æ–≥–ª–∞—Å–µ–Ω –Ω–∞ "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä–∞–±–æ—Ç—ã".
```

–í–æ –≤—Ä–µ–º—è –∏—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤ —Å –∫–ª–∏–µ–Ω—Ç–æ–º –±—ã–ª–æ –≤—ã—è—Å–Ω–µ–Ω–æ —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ apache –¥–µ–π—Å—Ç–≤–∏—è –∫–æ—Ç–æ—Ä—ã–µ –∫ —ç—Ç–æ–º—É –ø—Ä–∏–≤–æ–¥—è—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–µ–π —Å –∞—É–¥–∏–æ.

–ü–æ –∑–∞–ø—Ä–æ—Å—É –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–ª —Å—Ç–∞—Ç—å—é –Ω–∞ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–µ http://***gramm.pro/ —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ —Å–∞–º–∏ –≤–æ–∏—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É, –∏ –ø–µ—Ä–µ–¥–∞–ª —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏.

–í–æ –≤—Ä–µ–º—è –≤–æ–∏—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —á—Ç–æ –ª—é–±–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º—É —É–≤–µ–ª–∏—á–µ–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ apache –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏ –∏ –∑–∞–≤–∏—Å–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞.


–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø–æ–∫–∞–∑–∞–ª —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ nginx –∏ Apache. —Ç–∞–∫ –∫–∞–∫ nginx –∏–¥–µ—Ç –ø–µ—Ä–≤—ã–º —Å–Ω–∞—á–∞–ª–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –µ–≥–æ.

–≤ nginx –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å–≤–æ –æ—à–∏–±–æ–∫ nginx —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å worker_connections 

```
2024/09/15 12:43:32 [alert] 259727#259727: 768 worker_connections are not enough
```

–£–≤–µ–ª–∏—á–∏–ª–∏ axRequestWorkers

```
MaxRequestWorkers 150 -> MaxRequestWorkers 550
```

–î–æ–±–∞–≤–∏–ª–∏ —Ç–∞–∫–∂–µ –±—É—Ñ–µ—Ä—ã

```
proxy_buffering on; # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
proxy_buffer_size 4k;
proxy_buffers 32 4k; # –¥–æ 132K + —è–¥–µ—Ä–Ω—ã–µ –±—É—Ñ–µ—Ä–∞
proxy_max_temp_file_size 0;
```

–ö–ª–∏–µ–Ω—Ç —Ç–∞–∫–∂–µ —Å–æ–æ–±—â–∞–ª —Ç–∞–∫–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏

```
–ï—Å–ª–∏ –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å—ã, —Ç–æ –≤–∏–¥–∏–º, —á—Ç–æ –Ω–∞–ø–ª–æ–¥–∏–ª–æ—Å—å –±–æ–ª–µ–µ 150 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ apache2

–û—à–∏–±–∫–∞ 504 Gateway Time-Out. –ü—Ä–∏–ª–æ–∂–∏–ª –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞.
```

–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ Apache –±—ã–ª–∞ —Ç–∞–∂–µ –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º –ª–∏–º–∏—Ç–æ–≤, –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å —Å–ª–µ–¥—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```

–±—ã–ª–æ
vim /etc/apache2/mods-available/mpm_prefork.conf  
StartServers 5  
MinSpareServers 5  
MaxSpareServers 10  
MaxRequestWorkers 1024  
MaxConnectionsPerChild 0

—Å—Ç–∞–ª–æ

StartServers 10  
MinSpareServers 10  
MaxSpareServers 20  
ServerLimit 2000  
MaxRequestWorkers 1500  
MaxConnectionsPerChild 10000
```

–ï—Å–ª–∏ —Ä–µ–∑—é–º–∏—Ä–æ–≤–∞—Ç—å —Ç–æ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ç—å–∏ —á–µ—Ä–µ–∑ –≤–µ–± —Å–µ—Ä–≤–µ—Ä –∏–¥–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω–Ω–µ–∫—Ç–æ–≤. –í–µ–± —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ —É—Å–ø–µ–≤–∞—é—Ç –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å.

–î–∞–ª–µ–µ —Ç–∞–∫ –∫–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–≤—ã—Å–∏–ª–∏, –≤—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∂–∏—Ç—Å—è –Ω–∞ mysql

–ø–æ—Å–º–æ—Ç—Ä–µ–ª–∏ SHOW PROCCESSLIST;

–≤–∏–¥–∏–º –ø—Ä–æ—Ü–µ—Å—Å—ã –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —Ä–∞—Å—Ç—É—Ç

```
| 6294 | admin                | localhost | vokal02_vokal | Query   |   46 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6295 | admin                | localhost | vokal02_vokal | Query   |   29 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6296 | admin                | localhost | vokal02_vokal | Query   |   26 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6297 | admin                | localhost | vokal02_vokal | Query   |   22 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6298 | admin                | localhost | vokal02_vokal | Query   |   32 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6299 | admin                | localhost | vokal02_vokal | Query   |   19 | Waiting for table level lock | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6301 | admin                | localhost | vokal02_vokal | Query   |    4 | Opening tables               | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6303 | admin                | localhost | vokal02_vokal | Query   |   73 | executing                    | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6304 | admin                | localhost | vokal02_vokal | Sleep   |   73 |                              | NULL                                                                                                 |
| 6305 | admin                | localhost | vokal02_vokal | Query   |   73 | executing                    | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
| 6307 | admin                | localhost | vokal02_vokal | Query   |   73 | executing                    | SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t |
```

–°–¥–µ–ª–∞–ª–∏ –ª–æ–≥ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–≤–∞–ª–∏ —á–µ—Ä–µ–∑ percona-tools

```
# 150ms user time, 10ms system time, 28.94M rss, 34.90M vsz
# Current date: Fri Sep 20 05:31:11 2024
# Hostname: fonogramm3
# Files: /var/log/mysql/mysql-slow.log.1
# Overall: 811 total, 23 unique, 1.08 QPS, 88.99x concurrency ____________
# Time range: 2024-09-18T04:55:17 to 2024-09-18T05:07:46
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time         66652s      2s    168s     82s    159s     54s     84s
# Lock time         44917s       0    159s     55s    151s     56s     52s
# Rows sent          5.92k       0      60    7.48   36.69   11.90    2.90
# Rows examine      37.48M       0 228.27k  47.33k 222.42k  89.89k   11.95
# Query size       396.94k      16   1.15k  501.19  592.07  213.53  537.02

# Profile
# Rank Query ID                      Response time    Calls R/Call   V/M
# ==== ============================= ================ ===== ======== =====
#    1 0x8A2BFDCD9DEA61EDBD2CDFB3... 31009.2110 46.5%   282 109.9617 11.93 SELECT dle_post dle_post_extras
#    2 0x19650673119F178973630FD0... 18449.5609 27.7%   167 110.4764 21.18 SELECT dle_post dle_post_extras dle_post_extras_cats
#    3 0x445E7CAF1536030361A9EFB6...  7528.1039 11.3%    93  80.9474  8.96 SELECT dle_post dle_post_extras_cats dle_post_extras
#    4 0x2430813EE57DC6F686EE6FEA...  5733.1328  8.6%    48 119.4403 11.49 SELECT dle_post dle_post_extras
#    5 0x4990B5047475FA5BE176D77C...   934.2216  1.4%    86  10.8630  3.39 SELECT dle_post
#    9 0x651B55F97FA84879F295756D...   350.2628  0.5%    23  15.2288  6.29 SELECT dle_post dle_post_extras_cats
#   14 0xF07BF8B6438D6CE4DCF8F8EB...   149.8146  0.2%    65   2.3048  0.01 SELECT dle_post dle_post_extras_cats dle_post_extras
# MISC 0xMISC                         2497.3818  3.7%    47  53.1358   0.0 <16 ITEMS>

# Query 1: 11.75 QPS, 1.29kx concurrency, ID 0x8A2BFDCD9DEA61EDBD2CDFB3EB71656E at byte 461774
# Scores: V/M = 11.93
# Time range: 2024-09-18T05:07:22 to 2024-09-18T05:07:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         34     282
# Exec time     46  31009s      3s    161s    110s    151s     36s    107s
# Lock time     67  30176s      3s    159s    107s    151s     37s    107s
# Rows sent      4     281       0       1    1.00    0.99    0.06    0.99
# Rows examine   0     281       0       1    1.00    0.99    0.06    0.99
# Query size    38 150.88k     546     548  547.86  537.02       0  537.02
# String:
# Databases    vokal02_vokal
# Hosts        localhost
# Users        admin
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s  ##
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post`\G
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post_extras'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post_extras`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT p.id, p.autor, p.date, p.short_story, p.full_story, p.xfields, p.title, p.descr, p.keywords, p.category, p.alt_name, p.comm_num, p.allow_comm, p.allow_main, p.approve, p.fixed, p.allow_br, p.symbol, p.tags, p.metatitle, e.news_read, e.allow_rate, e.rating, e.vote_num, e.votes, e.view_edit, e.disable_index, e.related_ids, e.access, e.editdate, e.editor, e.reason, e.user_id, e.disable_search, e.need_pass, e.allow_rss, e.allow_rss_turbo, e.allow_rss_dzen FROM dle_post p LEFT JOIN dle_post_extras e ON (p.id=e.news_id) WHERE  p.id = '35688'\G
```

–ö–æ–Ω—Ñ–∏–≥ mysql

vim /etc/mysql/mysql.conf.d/mysqld.cnf

```
#
# The MySQL database server configuration file.
#
# One can use all long options that the program supports.
# Run program with --help to get a list of available options and with
# --print-defaults to see which it would actually understand and use.
#
# For explanations see
# http://dev.mysql.com/doc/mysql/en/server-system-variables.html

# Here is entries for some specific programs
# The following values assume you have at least 32M ram

[mysqld]
collation-server = utf8_general_ci
character-set-server = utf8
local-infile=0
default-authentication-plugin=mysql_native_password
innodb_file_per_table = 1
#
# * Basic Settings
#
user            = mysql
# pid-file      = /var/run/mysqld/mysqld.pid
# socket        = /var/run/mysqld/mysqld.sock
# port          = 3306
# datadir       = /var/lib/mysql


# If MySQL is running as a replication slave, this should be
# changed. Ref https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_tmpdir
# tmpdir                = /tmp
#
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.
bind-address            = 127.0.0.1
mysqlx-bind-address     = 127.0.0.1
#
# * Fine Tuning
#
key_buffer_size         = 256M
max_allowed_packet      = 64M
# thread_stack          = 256K

# thread_cache_size       = -1

# This replaces the startup script and checks MyISAM tables if needed
# the first time they are touched
myisam-recover-options  = BACKUP

max_connections        = 500
wait_timeout           = 60
# table_open_cache       = 4000

#
# * Logging and Replication
#
# Both location gets rotated by the cronjob.
#
# Log all queries
# Be aware that this log type is a performance killer.
# general_log_file        = /var/log/mysql/query.log
# general_log             = 1
#
# Error log - should be very few entries.
#
log_error = /var/log/mysql/error.log

#
# Here you can see queries with especially long duration
# slow_query_log                = 1
# slow_query_log_file   = /var/log/mysql/mysql-slow.log
# long_query_time = 2
# log-queries-not-using-indexes
#
# The following can be used as easy to replay backup logs or for replication.
# note: if you are setting up a replication slave, see README.Debian about
#       other settings you may need to change.
# server-id             = 1
# log_bin                       = /var/log/mysql/mysql-bin.log
# binlog_expire_logs_seconds    = 2592000
max_binlog_size   = 200M
# binlog_do_db          = include_database_name
# binlog_ignore_db      = include_database_name

```

–ü–æ–º–µ–Ω—è–ª–∏ –Ω–∞

```
[mysqld]
# –ö–æ–¥–∏—Ä–æ–≤–∫–∞
collation-server = utf8_general_ci
character-set-server = utf8
local-infile=0
default-authentication-plugin=mysql_native_password
innodb_file_per_table = 1

# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
user            = mysql
bind-address            = 127.0.0.1
mysqlx-bind-address     = 127.0.0.1

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ InnoDB
innodb_buffer_pool_size = 4G
innodb_read_io_threads = 8
innodb_write_io_threads = 8
innodb_thread_concurrency = 16
innodb_log_file_size = 1G
innodb_log_files_in_group = 2
innodb_lock_wait_timeout = 50
innodb_flush_method = O_DIRECT
innodb_buffer_pool_instances = 4

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–µ–π –∏ –±—É—Ñ–µ—Ä–æ–≤
key_buffer_size = 64M
table_open_cache = 2000
# query_cache_type = 0
# query_cache_size = 0
sort_buffer_size = 4M
thread_cache_size = 100

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
max_connections = 300
wait_timeout = 120
interactive_timeout = 120

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
log_error = /var/log/mysql/error.log
slow_query_log = 1
slow_query_log_file = /var/log/mysql/mysql-slow.log
long_query_time = 1
log_queries_not_using_indexes = 1

# –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –±–∏–Ω–∞—Ä–Ω—ã–µ –ª–æ–≥–∏
max_binlog_size   = 200M
#server-id             = 1
#log_bin                       = /var/log/mysql/mysql-bin.log
#binlog_expire_logs_seconds    = 2592000
#binlog_do_db          = include_database_name
#binlog_ignore_db      = include_database_name

```

#### **–ü–æ—á–µ–º—É —ç—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**

- **`innodb_buffer_pool_size = 4G`**: –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –ø—É–ª–∞ InnoDB, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–¥–µ–∫—Å–æ–≤. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –¥–æ 4 –ì–ë –ø–æ–∑–≤–æ–ª—è–µ—Ç MySQL —Ö—Ä–∞–Ω–∏—Ç—å –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è —Å –¥–∏—Å–∫–∞ –∏ —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤.
    
- **`innodb_read_io_threads` –∏ `innodb_write_io_threads` = 8** : –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –ø–æ–∑–≤–æ–ª—è—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞.
    
- **`innodb_thread_concurrency = 16`**: –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å InnoDB. –ó–Ω–∞—á–µ–Ω–∏–µ 16 –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤.
    
- **`innodb_log_file_size = 1G` –∏ `innodb_log_files_in_group = 2`**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ª–æ–≥-—Ñ–∞–π–ª–æ–≤ InnoDB —É–º–µ–Ω—å—à–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –∏—Ö –≤—Ä–∞—â–µ–Ω–∏—è (flush) –∏ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö –Ω–∞ –∑–∞–ø–∏—Å—å.
    
- **`innodb_lock_wait_timeout = 50`**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º –¥–æ–ª—å—à–µ –∂–¥–∞—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, —á—Ç–æ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø—Ä–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.
    
- **`innodb_flush_method = O_DIRECT`**: –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥–≤–æ–π–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±—É—Ñ–µ—Ä–∞—Ö –û–° –∏ InnoDB, —É–ª—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏.
    
- **`innodb_buffer_pool_instances = 4`**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –ø—É–ª–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ –∏ —É–ª—É—á—à–∞–µ—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.


- **`key_buffer_size = 64M`**: –ü–æ—Å–∫–æ–ª—å–∫—É –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ InnoDB –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è, —Ä–∞–∑–º–µ—Ä –∫–µ—à–∞ –∫–ª—é—á–µ–π –¥–ª—è MyISAM —Ç–∞–±–ª–∏—Ü ( `key_buffer_size`) –±—ã–ª —É–º–µ–Ω—å—à–µ–Ω. –≠—Ç–æ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –≤–∞–∂–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ InnoDB.
    
- **`table_open_cache = 2000`**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç MySQL —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–æ–ª—å—à–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ –∫–µ—à–µ, —á—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ —Ç–∞–±–ª–∏—Ü, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–∞–±–ª–∏—Ü.
    
- **`sort_buffer_size = 4M`**: –≠—Ç–æ—Ç –±—É—Ñ–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –Ω–æ —Å–ª–µ–¥—É–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ —ç—Ç–æ—Ç –±—É—Ñ–µ—Ä –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–º—É –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.
    
- **`thread_cache_size = 100`**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç MySQL –±—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞ —Å—á–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏

#### **–ü–æ—á–µ–º—É —ç—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**

- **`max_connections = 300`**: –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ —Å–µ—Ä–≤–µ—Ä—É MySQL. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –Ω–∞ 300 –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤. –û–¥–Ω–∞–∫–æ –≤–∞–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–∞–∫–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.
    
- **`wait_timeout` –∏ `interactive_timeout = 120`**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —ç—Ç–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º –¥–æ–ª—å—à–µ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏, —á—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –û–¥–Ω–∞–∫–æ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É–≤–µ–ª–∏—á–µ–Ω–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤, –ø–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–º—è—Ç–∏.


#### **–ü–æ—á–µ–º—É —ç—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**

- **`slow_query_log = 1`**: –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∞ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–Ω–∏–º–∞—é—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —á–µ–º –∑–∞–¥–∞–Ω–Ω—ã–π –ø–æ—Ä–æ–≥ ( `long_query_time`).
    
- **`long_query_time = 1`**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ—Å—è –¥–æ–ª—å—à–µ –æ–¥–Ω–æ–π —Å–µ–∫—É–Ω–¥—ã, –±—É–¥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –≤ –º–µ–¥–ª–µ–Ω–Ω—ã–π –ª–æ–≥. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.
    
- **`log_queries_not_using_indexes = 1`**: –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–Ω–¥–µ–∫—Å—ã. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å–∫–æ—Ä–µ–Ω—ã –∑–∞ —Å—á–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤.


#### **–ü–æ—á–µ–º—É —ç—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**

- **`max_binlog_size = 200M`**: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö –ª–æ–≥–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –∏—Ö —á—Ä–µ–∑–º–µ—Ä–Ω—ã–π —Ä–æ—Å—Ç. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏—Å–∫–æ–≤—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.
    
- **–û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã** : –ü–æ—Å–∫–æ–ª—å–∫—É –≤—ã, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏–ª–∏ –±–∏–Ω–∞—Ä–Ω—ã–µ –ª–æ–≥–∏ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—ã–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã. –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–µ –ª–æ–≥–∏, –∏—Ö –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å.

### **–ü–æ—á–µ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —É–ª—É—á—à–∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

1. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** : –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `query_cache_type` –∏ `query_cache_size` –ø–æ–∑–≤–æ–ª–∏–ª–æ MySQL —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.
    
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏** : –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –º–µ–∂–¥—É –±—É—Ñ–µ—Ä–Ω—ã–º–∏ –ø—É–ª–∞–º–∏ –∏ –∫–µ—à–∞–º–∏ –ø–æ–∑–≤–æ–ª–∏–ª–æ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—É—é –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å, —á—Ç–æ —Å–Ω–∏–∑–∏–ª–æ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–∏—Å—Ç–µ–º—É –∏ —É–º–µ–Ω—å—à–∏–ª–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.
    
3. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞** : –ù–∞—Å—Ç—Ä–æ–π–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ—Ç–æ–∫–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞–º–∏, –ø–æ–∑–≤–æ–ª–∏–ª–∏ —Å–µ—Ä–≤–µ—Ä—É –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–ª–æ –æ–±—â—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å.
    
4. **–£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** : –í–∫–ª—é—á–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –ª–æ–≥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–∑–≤–æ–ª–∏–ª–æ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —á—Ç–æ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Å–Ω–∏–∂–∞–µ—Ç –æ–±—â—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
    
5. **–°–Ω–∏–∂–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü** : –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ InnoDB, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –ø—É–ª–∞ –∏ –º–µ—Ç–æ–¥—ã —Å–±—Ä–æ—Å–∞, –ø–æ–∑–≤–æ–ª–∏–ª–∞ —É–º–µ–Ω—å—à–∏—Ç—å –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.


### **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `my.cnf` –±—ã–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞, —É–ª—É—á—à–µ–Ω–∏–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –≤–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É MySQL —Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, —Å–Ω–∏–∑–∏–≤ –Ω–∞–≥—Ä—É–∑–∫—É –∏ —É—Å—Ç—Ä–∞–Ω–∏–≤ –ø—Ä–æ–±–ª–µ–º—ã —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ —Ç–∞–±–ª–∏—Ü.


–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–µ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ –∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ 

```
 SHOW PROCESSLIST;
+------+-----------------+-----------+--------+---------+------+------------------------+------------------+
| Id   | User            | Host      | db     | Command | Time | State                  | Info             |
+------+-----------------+-----------+--------+---------+------+------------------------+------------------+
|    5 | event_scheduler | localhost | NULL   | Daemon  |  300 | Waiting on empty queue | NULL             |
|   79 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
|   80 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
|   81 | ispmgr          | localhost | ispmgr | Sleep   |  225 |                        | NULL             |
|   82 | ispmgr          | localhost | ispmgr | Sleep   |   34 |                        | NULL             |
|  390 | ispmgr          | localhost | ispmgr | Sleep   |  225 |                        | NULL             |
|  391 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
| 2281 | root            | localhost | NULL   | Query   |    0 | init                   | SHOW PROCESSLIST |
+------+-----------------+-----------+--------+---------+------+------------------------+------------------+
8 rows in set, 1 warning (0.00 sec)

```


–ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –ø–µ—Ä—Å–æ–Ω—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```
# 90ms user time, 30ms system time, 28.98M rss, 34.89M vsz
# Current date: Fri Sep 20 06:14:21 2024
# Hostname: fonogramm3
# Files: /var/log/mysql/mysql-slow.log
# Overall: 278 total, 22 unique, 0.70 QPS, 0.01x concurrency _____________
# Time range: 2024-09-20T06:03:51 to 2024-09-20T06:10:28
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time             4s    58us      1s    13ms     5ms   105ms   626us
# Lock time          740us       0    17us     2us     4us     1us     1us
# Rows sent          5.57k       0      60   20.50   59.77   23.99    6.98
# Rows examine     754.74k       0 228.27k   2.71k   1.26k  22.96k   62.76
# Query size        63.46k      32     603  233.73  563.87  127.40  212.52

# Profile
# Rank Query ID                        Response time Calls R/Call V/M   It
# ==== =============================== ============= ===== ====== ===== ==
#    1 0x19650673119F178973630FD07E...  3.1090 87.3%     3 1.0363  0.01 SELECT dle_post dle_post_extras dle_post_extras_cats
#    2 0x651B55F97FA84879F295756D0D...  0.2044  5.7%   138 0.0015  0.00 SELECT dle_post dle_post_extras_cats
#    3 0x1F18CE45F7AB14058C0B37FF1E...  0.1677  4.7%     5 0.0335  0.13 SELECT dle_post dle_post_extras_cats dle_post_extras
# MISC 0xMISC                           0.0783  2.2%   132 0.0006   0.0 <19 ITEMS>

# Query 1: 0.06 QPS, 0.06x concurrency, ID 0x19650673119F178973630FD07ECA56E4 at byte 57443
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2024-09-20T06:07:16 to 2024-09-20T06:08:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1       3
# Exec time     87      3s   977ms      1s      1s      1s    89ms   945ms
# Lock time      0     5us     1us     2us     1us     1us       0     1us
# Rows sent      0      30      10      10      10      10       0      10
# Rows examine  90 684.82k 228.27k 228.27k 228.27k 228.27k       0 228.27k
# Query size     2   1.73k     590     590     590     590       0     590
# String:
# Databases    vokal02_vokal
# Hosts        localhost
# Users        admin
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s  ################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post`\G
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post_extras'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post_extras`\G
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post_extras_cats'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post_extras_cats`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.title, p.descr, p.keywords, p.category, p.alt_name, p.comm_num, p.allow_comm, p.allow_main, p.approve, p.fixed, p.symbol, p.tags, e.news_read, e.allow_rate, e.rating, e.vote_num, e.votes, e.view_edit, e.disable_index, e.editdate, e.editor, e.reason FROM dle_post p LEFT JOIN dle_post_extras e ON (p.id=e.news_id)  WHERE p.id NOT IN ( SELECT DISTINCT(dle_post_extras_cats.news_id) FROM dle_post_extras_cats WHERE cat_id IN ('3548','3541','7') ) AND approve=1 ORDER BY news_read ASC LIMIT 0,10\G

# Query 2: 0.35 QPS, 0.00x concurrency, ID 0x651B55F97FA84879F295756D0D5656F9 at byte 65406
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2024-09-20T06:03:51 to 2024-09-20T06:10:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         49     138
# Exec time      5   204ms   281us    14ms     1ms     6ms     2ms   925us
# Lock time     60   446us     1us    10us     3us     4us     1us     2us
# Rows sent     91   5.07k       1      60   37.60   59.77   22.64   42.48
# Rows examine   7  56.99k       3   3.83k  422.91   2.62k  748.83  158.58
# Query size    46  29.25k     215     225  217.07  212.52    1.55  212.52
# String:
# Databases    vokal02_vokal
# Hosts        localhost
# Users        admin
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #######################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post`\G
#    SHOW TABLE STATUS FROM `vokal02_vokal` LIKE 'dle_post_extras_cats'\G
#    SHOW CREATE TABLE `vokal02_vokal`.`dle_post_extras_cats`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT p.id FROM dle_post p INNER JOIN (SELECT DISTINCT(dle_post_extras_cats.news_id) FROM dle_post_extras_cats WHERE cat_id IN ('309')) c ON (p.id=c.news_id) WHERE approve=1 ORDER BY fixed desc, title ASC LIMIT 360,60\G

```

–∫–∞–∫ –≤–∏–¥–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –±–æ–ª–µ–µ 10 —Å–µ–∫—É–Ω–¥ —Å—Ç–∞–ª–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–µ, –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ 100us 1ms, —Ö–æ—Ç—è –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –µ—â–µ –æ—Å—Ç–∞—é—Ç—Å—è.



# –û—Ç—á–µ—Ç –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞](#—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è-—Å–µ—Ä–≤–µ—Ä–∞)
2. [–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
3. [–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã](#–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ-–∏-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
4. [–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏](#–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
   - [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-nginx)
   - [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apache](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-apache)
   - [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-mysql)
5. [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-–∏-–∞–Ω–∞–ª–∏–∑)
6. [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)

## –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞

- **–¢–∞—Ä–∏—Ñ**: Cloud 2-8-1000
- **CPU**: 2 —è–¥—Ä–∞
- **–û–ó–£**: 8 –ì–ë
- **–î–∏—Å–∫**: 10000 –ì–ë
- **–û–°**: Ubuntu 22.04
- **–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: ISP Manager
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ü–û**: Redis, OPcache
- **–°–∞–π—Ç**: http://***gramm.pro/

## –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–°–µ—Ä–≤–µ—Ä –∏—Å–ø—ã—Ç—ã–≤–∞–ª —Å–µ—Ä—å–µ–∑–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –¥–æ–±–∞–≤–ª—è–ª–∏ –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ –Ω–æ–≤–æ—Å—Ç–∏. –°–∏–º–ø—Ç–æ–º—ã –≤–∫–ª—é—á–∞–ª–∏:

1. –†–µ–∑–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
2. –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ –û–ó–£
3. –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞
4. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–ü—Ä–æ–±–ª–µ–º—ã –±—ã–ª–∏ –Ω–∞–∏–±–æ–ª–µ–µ –≤—ã—Ä–∞–∂–µ–Ω—ã –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π, –æ—Å–æ–±–µ–Ω–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –∞—É–¥–∏–æ –∫–æ–Ω—Ç–µ–Ω—Ç.

## –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–æ—Ü–µ—Å—Å—ã Apache
- –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Apache (–±–æ–ª–µ–µ 150) —Å–æ–∑–¥–∞–≤–∞–ª–æ—Å—å –≤–æ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π.
- –≠—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–∑—ã–≤–∞–ª–∏ –∏—Å—Ç–æ—â–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤.

### –ê–Ω–∞–ª–∏–∑ MySQL
- `SHOW PROCESSLIST` –ø–æ–∫–∞–∑–∞–ª –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–µ—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ MySQL.
- –ú–Ω–æ–≥–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "Waiting for table level lock".
- –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
  ```sql
  SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.t ...
  ```

### –ê–Ω–∞–ª–∏–∑ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Percona Toolkit –ø–æ–∫–∞–∑–∞–ª:
- 811 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤—Å–µ–≥–æ, 23 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö
- 1.08 QPS (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)
- 88.99x –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å
- –ó–∞–ø—Ä–æ—Å —Å –Ω–∞–∏–≤—ã—Å—à–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º (46.5% –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞):
  ```sql
  SELECT p.id, p.autor, p.date, p.short_story, CHAR_LENGTH(p.full_story) as full_story, p.xfields, p.title, p.descr, p.keywords, p.category, p.alt_name, p.comm_num, p.allow_comm, p.allow_main, p.approve, p.fixed, p.allow_br, p.symbol, p.tags, p.metatitle, e.news_read, e.allow_rate, e.rating, e.vote_num, e.votes, e.view_edit, e.disable_index, e.related_ids, e.access, e.editdate, e.editor, e.reason, e.user_id, e.disable_search, e.need_pass, e.allow_rss, e.allow_rss_turbo, e.allow_rss_dzen FROM dle_post p LEFT JOIN dle_post_extras e ON (p.id=e.news_id) WHERE p.id = '35688'
  ```

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
- –£–≤–µ–ª–∏—á–µ–Ω–æ `worker_connections` –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –æ—à–∏–±–∫–∏ "768 worker_connections are not enough".
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏:
  ```nginx
  proxy_buffering on;
  proxy_buffer_size 4k;
  proxy_buffers 32 4k;
  proxy_max_temp_file_size 0;
  ```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Apache
–ò–∑–º–µ–Ω–µ–Ω —Ñ–∞–π–ª `/etc/apache2/mods-available/mpm_prefork.conf`:

```apache
StartServers 10
MinSpareServers 10
MaxSpareServers 20
ServerLimit 2000
MaxRequestWorkers 1500
MaxConnectionsPerChild 10000
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MySQL
–û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª `/etc/mysql/mysql.conf.d/mysqld.cnf`:

```ini
[mysqld]
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ InnoDB
innodb_buffer_pool_size = 4G
innodb_read_io_threads = 8
innodb_write_io_threads = 8
innodb_thread_concurrency = 16
innodb_log_file_size = 1G
innodb_log_files_in_group = 2
innodb_lock_wait_timeout = 50
innodb_flush_method = O_DIRECT
innodb_buffer_pool_instances = 4

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–∞ –∏ –±—É—Ñ–µ—Ä–æ–≤
key_buffer_size = 64M
table_open_cache = 2000
sort_buffer_size = 4M
thread_cache_size = 100

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
max_connections = 300
wait_timeout = 120
interactive_timeout = 120

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
slow_query_log = 1
slow_query_log_file = /var/log/mysql/mysql-slow.log
long_query_time = 1
log_queries_not_using_indexes = 1

# –ë–∏–Ω–∞—Ä–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
max_binlog_size = 200M
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:

1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞.
2. –í—ã–≤–æ–¥ `SHOW PROCESSLIST` –ø–æ–∫–∞–∑–∞–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:
   ```
   +------+-----------------+-----------+--------+---------+------+------------------------+------------------+
   | Id   | User            | Host      | db     | Command | Time | State                  | Info             |
   +------+-----------------+-----------+--------+---------+------+------------------------+------------------+
   |    5 | event_scheduler | localhost | NULL   | Daemon  |  300 | Waiting on empty queue | NULL             |
   |   79 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
   |   80 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
   |   81 | ispmgr          | localhost | ispmgr | Sleep   |  225 |                        | NULL             |
   |   82 | ispmgr          | localhost | ispmgr | Sleep   |   34 |                        | NULL             |
   |  390 | ispmgr          | localhost | ispmgr | Sleep   |  225 |                        | NULL             |
   |  391 | ispmgr          | localhost | ispmgr | Sleep   |   45 |                        | NULL             |
   | 2281 | root            | localhost | NULL   | Query   |    0 | init                   | SHOW PROCESSLIST |
   +------+-----------------+-----------+--------+---------+------+------------------------+------------------+
   ```

3. –ù–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ Percona Toolkit –ø–æ–∫–∞–∑–∞–ª:
   - –£–º–µ–Ω—å—à–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (278 –ø—Ä–æ—Ç–∏–≤ 811 —Ä–∞–Ω–µ–µ)
   - –°–Ω–∏–∂–µ–Ω–∏–µ QPS (0.70 –ø—Ä–æ—Ç–∏–≤ 1.08 —Ä–∞–Ω–µ–µ)
   - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (0.01x –ø—Ä–æ—Ç–∏–≤ 88.99x —Ä–∞–Ω–µ–µ)
   - –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 100–º–∫—Å –¥–æ 1–º—Å

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í–Ω–µ–¥—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞:

1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏**: –£–ª—É—á—à–µ–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ CPU –º–µ–∂–¥—É Nginx, Apache –∏ MySQL.
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**: –ü–æ–≤—ã—à–µ–Ω–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MySQL —É–ª—É—á—à–∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —É–º–µ–Ω—å—à–∏–ª–∏ –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –£–ª—É—á—à–µ–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–∞–ª—å–Ω–µ–π—à–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.